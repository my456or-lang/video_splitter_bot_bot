# 🎬 Telegram Video Splitter Bot

בוט טלגרם לחיתוך סרטונים ארוכים לקטעים של 30 שניות + דחיסה חכמה.

## ✨ תכונות

- ✂️ חיתוך אוטומטי לקטעים של 30 שניות (ניתן לשינוי)
- 🗜️ דחיסה חכמה - הקטנת גודל ב-50-70%!
- 💾 חסכוני בזיכרון (512MB RAM)
- 📤 תמיכה בסרטונים ארוכים ללא הגבלה
- 🚀 פריסה חינמית על Render
- 🎯 מתאים לבוטים עם מגבלת גודל/זמן

---

## 📊 השוואת מצבים

| תכונה | עם דחיסה | ללא דחיסה |
|-------|----------|-----------|
| **גודל קובץ** | 30-50% מהמקור | 100% מהמקור |
| **איכות** | טובה מאוד (CRF 28) | מושלמת (100%) |
| **מהירות עיבוד** | ~2 דקות/10 דקות | ~30 שניות/10 דקות |
| **זיכרון נדרש** | בינוני | מינימלי |
| **מומלץ ל...** | העלאות, אחסון | עריכה, איכות מקס' |

### 🎬 דוגמה מציאותית:

**סרטון 10 דקות, Full HD (200MB):**

| מצב | תוצאה |
|-----|-------|
| 🗜️ **עם דחיסה** | 20 קטעים × ~4MB = **~80MB סה"כ** (חיסכון 60%) |
| ⚡ **ללא דחיסה** | 20 קטעים × ~10MB = **~200MB סה"כ** (איכות מקס') |

---

## 📋 דרישות מוקדמות

### 1. טוקן Telegram Bot
1. פתח שיחה עם [@BotFather](https://t.me/BotFather)
2. שלח `/newbot` ועקוב אחר ההוראות
3. שמור את הטוקן (נראה כך: `123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11`)

### 2. Groq API Key (אופציונלי)
1. היכנס ל-[Groq Console](https://console.groq.com)
2. צור API Key חדש
3. שמור את המפתח

### 3. חשבון GitHub
- צור חשבון ב-[GitHub](https://github.com) אם אין לך

### 4. חשבון Render
- צור חשבון ב-[Render](https://render.com) (חינמי)

---

## 🚀 התקנה - שלב אחר שלב

### שלב 1: העלאה ל-GitHub

#### מהמחשב (אם יש לך Git):
```bash
# 1. צור תיקייה חדשה
mkdir telegram-video-bot
cd telegram-video-bot

# 2. העתק את כל הקבצים (bot.py, requirements.txt וכו')

# 3. אתחול Git
git init
git add .
git commit -m "Initial commit"

# 4. צור repository חדש ב-GitHub ואז:
git remote add origin https://github.com/YOUR-USERNAME/telegram-video-bot.git
git branch -M main
git push -u origin main
```

#### מהאנדרואיד (בלי Git):
1. היכנס ל-[GitHub](https://github.com) מהדפדפן
2. לחץ על **New Repository**
3. תן שם: `telegram-video-bot`
4. סמן **Public**
5. לחץ **Create repository**
6. לחץ **Upload files**
7. העלה את כל הקבצים:
   - `bot.py`
   - `requirements.txt`
   - `render.yaml`
   - `.gitignore`
   - `README.md`
8. לחץ **Commit changes**

---

### שלב 2: פריסה ל-Render

1. **היכנס ל-[Render Dashboard](https://dashboard.render.com)**

2. **לחץ על "New +" → "Web Service"**

3. **חבר את GitHub:**
   - לחץ "Connect account" אם זו הפעם הראשונה
   - אשר את הגישה ל-GitHub

4. **בחר את הפרויקט:**
   - מצא את `telegram-video-bot` ברשימה
   - לחץ **Connect**

5. **הגדרות (Render ימלא אוטומטית מ-render.yaml):**
   - Name: `telegram-video-splitter`
   - Region: `Frankfurt` (קרוב יותר לישראל)
   - Branch: `main`
   - Build Command: יומלא אוטומטית
   - Start Command: יומלא אוטומטית
   - Plan: **Free**

6. **הוספת Environment Variables:**
   לחץ על "Add Environment Variable" והוסף:
   
   **משתנה 1:**
   - Key: `TELEGRAM_TOKEN`
   - Value: `הטוקן_שקיבלת_מ_BotFather`
   
   **משתנה 2 (אופציונלי):**
   - Key: `GROQ_API_KEY`
   - Value: `המפתח_מ_Groq`

7. **לחץ "Create Web Service"**

8. **המתן לבנייה:**
   - הבנייה תיקח כ-5-10 דקות
   - תראה logs בזמן אמת
   - חפש את השורה: `🚀 הבוט מתחיל לרוץ...`

---

## 🎯 שימוש בבוט

1. **פתח את הבוט ב-Telegram**
   - חפש את שם הבוט שיצרת
   - לחץ **Start**

2. **שלח סרטון:**
   - שלח כ-Video (עד 2GB)
   - או שלח כ-File (ללא הגבלה)

3. **קבל קטעים:**
   - הבוט יחזיר `part_001.mp4`, `part_002.mp4` וכו'
   - כל קטע: 30 שניות
   - עם דחיסה: קבצים קטנים ב-50-70%!

### פקודות זמינות:
- `/start` - הודעת פתיחה + סטטוס הגדרות
- `/help` - עזרה ומידע
- `/status` - בדיקת סטטוס שרת
- `/settings` - הצגת הגדרות מפורטות

### 📊 דוגמה:
**סרטון של 5 דקות (100MB):**
- ✂️ יתחלק ל-10 קטעים של 30 שניות
- 🗜️ עם דחיסה: ~30-40MB סה"כ
- ⚡ ללא דחיסה: 100MB (איכות מקסימלית)

---

## 🔧 פתרון בעיות

### הבוט לא עונה:
1. בדוק ש-Render מציג **"Live"** בירוק
2. בדוק את ה-Logs ב-Render
3. ודא שה-TELEGRAM_TOKEN נכון

### שגיאת זיכרון (Out of Memory):
- **עם דחיסה:** אם קורה, כבה את הדחיסה (`ENABLE_COMPRESSION = False`)
- **ללא דחיסה:** לא אמור לקרות (streaming mode)
- **פתרון חלופי:** הקטן את `SEGMENT_DURATION` (למשל ל-15 שניות)

### חיתוך איטי:
- **עם דחיסה:** נורמלי - כ-2 דקות לכל 10 דקות סרטון
- **ללא דחיסה:** אמור להיות מהיר - כ-30 שניות לכל 10 דקות
- Render החינמי מוגבל ב-CPU

### דחיסה לא עובדת טוב:
- נסה לשנות את ה-CRF (שורה 80 ב-bot.py)
- ערך נמוך יותר = איכות גבוהה יותר
- ערך גבוה יותר = דחיסה חזקה יותר

### קבצים עדיין גדולים מדי:
1. **הגבר דחיסה:** שנה CRF ל-32 או 35
2. **הקטן רזולוציה:** הוסף לקוד:
   ```python
   '-vf', 'scale=1280:-2',  # HD במקום Full HD
   ```
3. **הפחת ביטרייט אודיו:** שנה מ-128k ל-96k

### הבוט נרדם אחרי 15 דקות:
- Render החינמי נרדם אם אין פעילות
- הבוט יתעורר אוטומטית כשתשלח הודעה
- התעוררות ראשונה: 30-60 שניות

---

## 📊 מגבלות Render (תוכנית חינמית)

| מגבלה | ערך |
|-------|-----|
| זיכרון RAM | 512MB |
| שעות חודשיות | 750 שעות |
| רוחב פס | 100GB/חודש |
| שינה אוטומטית | אחרי 15 דקות חוסר פעילות |

---

## 🛠️ התאמות אישיות

### 🔧 שינוי אורך קטעים:
ערוך את `bot.py` בשורה 20-22:
```python
SEGMENT_DURATION = 30  # שנה למספר השניות הרצוי
# דוגמאות:
# 30 = חצי דקה
# 60 = דקה אחת
# 300 = 5 דקות
# 540 = 9 דקות (לבוט כתוביות עם מגבלת 10 דקות)
```

### 🗜️ הפעלה/כיבוי דחיסה:
ערוך את `bot.py` בשורה 22:
```python
ENABLE_COMPRESSION = True   # דחיסה פעילה (קבצים קטנים)
ENABLE_COMPRESSION = False  # ללא דחיסה (איכות מקסימלית, מהיר יותר)
```

### 🎨 שינוי רמת דחיסה:
ערוך את `bot.py` בפונקציה `split_video` (שורה ~80):
```python
'-crf', '28',  # שנה את המספר:
# 18 = איכות מעולה (קבצים יותר גדולים)
# 23 = איכות טובה מאוד (ברירת מחדל של FFmpeg)
# 28 = איכות טובה + דחיסה חזקה (מומלץ!)
# 35 = איכות בינונית (דחיסה מקסימלית)
```

### ⚡ חיתוך מהיר ללא דחיסה:
```python
ENABLE_COMPRESSION = False  # העתקה מהירה ללא קידוד מחדש
# יתרונות: מהר פי 10-20, איכות 100%
# חסרונות: קבצים גדולים
```

---

## 📱 עדכון הבוט

### מ-GitHub (אוטומטי):
1. ערוך קבצים ב-GitHub
2. Render יעדכן אוטומטית

### מהמחשב:
```bash
git add .
git commit -m "עדכון"
git push
```
Render יזהה ויפרוס מחדש אוטומטית.

---

## 🆘 תמיכה

- **בעיות טכניות:** פתח [Issue ב-GitHub](https://github.com/YOUR-USERNAME/telegram-video-bot/issues)
- **Render Docs:** https://render.com/docs
- **Telegram Bot API:** https://core.telegram.org/bots/api

---

## 📄 רישיון

MIT License - חופשי לשימוש

---

## 🙏 תודות

- FFmpeg - לעיבוד וידאו
- python-telegram-bot - ספרייה מעולה
- Render - אירוח חינמי

---

**נבנה ב-❤️ לקהילה העברית**
